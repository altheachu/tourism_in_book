<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./styles/article.css">
  <title>Novel Thoughts</title>
</head>

<body>
  <header>
    <div class="header">
      Glance A Country From A Novel
    </div>
  </header>
  <div class="main_content">
    <div class="search">
      <form action="/searchArticles" method="POST">
        <span class="search_title">
          <label for="title">Title</label>
          <input type="text" name="title" id="title" placeholder="keywords">
        </span>
        <span class="search_country">
          <label for="country">Country</label>
          <input list="countries" type="text" name="country" placeholder="<%= locals.error ? error :  'Keywords'%>">  
          <%if(locals.countryNames){%>
            <datalist id="countries">
              <%for(let i=0; i< countryNames.length; i++) {%>
                <option value="<%=countryNames[i]%>"></option>
              <%}%>  
            </datalist>
          <%}%>
        </span>
        <span class="search_sort">
          <label for="sort">Sort</label>
          <select name="sort" id="sort">
            <%if(locals.bookSortOptions){
              for(let i= 0; i < bookSortOptions.length; i++){
              %>
              <option value="<%=bookSortOptions[i].value%>">
                <%=bookSortOptions[i].display%>
              </option>
              <%}%>
            <%}%>
          </select>
        </span>
        <span class="search_btn">
          <button name="search" id="search">Search</button>
        </span>
      </form>
    </div>
    <div class="introduction">
      <b>I love travelling. I like reading novels.</b>
      I long for the exotic scenary in those stories, so I may plan a travel to the country. Also, sometimes I would like to know more about a country, so I find a related novel to read. 
      <b>This bi-directional connection enriches my life.</b> 
      That's what I would like to share with you here.
    </div>
    <div class="article">
      <% if (locals.articles && articles.length > 0){
        for (let i = 0; i < articles.length; i++){
      %>
        <div class="card"> 
        <div class="img">
          <img src="<%=articles[i].img_url%>" width="150px" height="200px">
        </div>
        <div class="card_content">
          <div class="title"><%=articles[i].title%></div>
          <div class="info">
            <span>Date read:</span>
            <span><%=articles[i].read_date_str%></span>
            <span class="empty_span"></span>
            <span>Location:</span>
            <span><%=articles[i].location%></span>
          </div>
          <div class="recommend">How strongly I recommend it: <%=articles[i].recommendation%>/10</div>
          <div class="summary">
            <%=articles[i].summary%>
          </div>
          <div class="link">
            <a href="/note/1">Read my notes</a>, or go to the <a target="_blank" href="<%=articles[i].amazon_url%>">Amazon page</a> for details and reviews.
          </div>
        </div>
        </div>
      <%}
      } else {%>
        <div class="no_article">
          <div class="empty_wording">Empty Result</div>
        </div>
      <%}%>
    </div>
  </div>
  <footer>
    <div class="footer">
      <% const yr = new Date().getFullYear() %>
      <p>Copyright Â© <%=yr%> Althea Chu</p>
    </div>
  </footer>
</body>

</html>